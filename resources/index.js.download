parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"R91V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.systemError=exports.userFailed=exports.success=void 0;var e="success";exports.success=e;var s="user failed";exports.userFailed=s;var r="system error";exports.systemError=r;
},{}],"DCv0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleLogDisplay=exports.log=void 0;var o=!1,e=function(){for(var e,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];o&&(e=console).log.apply(e,["=-="].concat(r))};exports.log=e;var t=function(){o=!o};exports.toggleLogDisplay=t;
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./consts/statusCodes"),r=require("./utils/common");window.chsrvc=function(){var o={};return o.toggleLogDisplay=r.toggleLogDisplay,o.onDoneCb=function(e,o){(0,r.log)("WARNING: chsrvc called original onDoneCb",e,o)},o.onErrorCb=function(e,t){t.userDisplayError=t.userDisplayError||"An unexpected error occurred, please try again later.",(0,r.log)("Checkout error: ".concat(e,", ").concat(t.error)),o.onDoneCb(e,t)},o.onDone=function(r,t){if(r===e.success){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE)if(200==n.status)try{var r=JSON.parse(n.responseText).data;o.onDoneCb(e.success,r)}catch(s){var a="Failed parsing response while creating charging profile. response: ".concat(n.responseText);o.onErrorCb(e.systemError,{error:a})}else t.error="Failed creating charging profile - got status code ".concat(n.status," from charging service server. response: ").concat(n.responseText),o.onErrorCb(e.systemError,t)};var a={gateway:o.gateway,owner_uuid:o.ownerUuid,creator_uuid:o.creatorUuid,payload:{session_token:t.token}};n.open("POST","".concat("https://charging.wework.com","/api/v1/open_charging_profiles/"),!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.send(JSON.stringify(a))}else o.onErrorCb(r,t)},o.checkout=function(t,n,a){(0,r.log)("Starting chsrvc checkout"),o.onDoneCb=a;var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState==XMLHttpRequest.DONE)if(200==s.status)try{var a=JSON.parse(s.responseText);o.gateway=a.data.gateway,o.ownerUuid=n.owner_uuid,o.creatorUuid=n.creator_uuid,(0,r.log)("Selected gateway: ".concat(o.gateway)),n.paymentSession=a.data.paymentSession;var c=document.createElement("script");c.onload=function(){gateway.checkout(t,n,o.onDone)},c.onerror=function(){o.onErrorCb(e.systemError,{error:"Error loading ".concat(this.src)})},c.src=a.data.scriptFile,document.head.appendChild(c)}catch(g){var i="Failed handling response while initiating session. responseText: ".concat(s.responseText,". error: ").concat(g);o.onErrorCb(e.systemError,{error:i})}else{var u="Failed initiating session - got status code ".concat(s.status," from charging service server. reason: ").concat(s.responseText);o.onErrorCb(e.systemError,{error:u})}};var c={locale:n.locale,merchant_uuid:n.merchant_uuid};s.open("POST","".concat("https://charging.wework.com","/api/v1/sessions/"),!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.send(JSON.stringify(c))},o}();
},{"./consts/statusCodes":"R91V","./utils/common":"DCv0"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map